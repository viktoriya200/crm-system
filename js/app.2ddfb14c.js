(function(e){function t(t){for(var n,r,s=t[0],l=t[1],u=t[2],i=0,b=[];i<s.length;i++)r=s[i],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&b.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(b.length)b.shift()();return c.push.apply(c,u||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],n=!0,r=1;r<a.length;r++){var s=a[r];0!==o[s]&&(n=!1)}n&&(c.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},r={app:0},o={app:0},c=[];function s(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-2d0a4783":"d1a831cb","chunk-2d0be70b":"28ee546a","chunk-4004e5c6":"1750866e"}[e]+".js"}function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-4004e5c6":1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=new Promise((function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-2d0a4783":"31d6cfe0","chunk-2d0be70b":"31d6cfe0","chunk-4004e5c6":"c8775c03"}[e]+".css",o=l.p+n,c=document.getElementsByTagName("link"),s=0;s<c.length;s++){var u=c[s],i=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(i===n||i===o))return t()}var b=document.getElementsByTagName("style");for(s=0;s<b.length;s++){u=b[s],i=u.getAttribute("data-href");if(i===n||i===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var n=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=n,delete r[e],d.parentNode.removeChild(d),a(c)},d.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){r[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var c=new Promise((function(t,a){n=o[e]=[t,a]}));t.push(n[2]=c);var u,i=document.createElement("script");i.charset="utf-8",i.timeout=120,l.nc&&i.setAttribute("nonce",l.nc),i.src=s(e);var b=new Error;u=function(t){i.onerror=i.onload=null,clearTimeout(d);var a=o[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;b.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",b.name="ChunkLoadError",b.type=n,b.request=r,a[1](b)}o[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:i})}),12e4);i.onerror=i.onload=u,document.head.appendChild(i)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/crm-system/",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var b=0;b<u.length;b++)t(u[b]);var d=i;c.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},2123:function(e,t,a){"use strict";var n=a("4ab5"),r=a.n(n);a.d(t,"default",(function(){return r.a}))},"26ef":function(e,t,a){},"33ea":function(e,t,a){"use strict";var n=a("f4dc"),r=a.n(n);a.d(t,"default",(function(){return r.a}))},"3f9b":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const n=new Intl.NumberFormat("ru-RU",{currency:"RUB",style:"currency"});function r(e){return n.format(e)}},"4ab5":function(e,t,a){e.exports={bold:"TheNavbar_bold_178Ng","pt-2":"TheNavbar_pt-2_2_9w4","pt-1":"TheNavbar_pt-1_3ZF5C","pt-5":"TheNavbar_pt-5__JeSs","form-control":"TheNavbar_form-control_23PQ-",_w40:"TheNavbar__w40_2Lubt",invalid:"TheNavbar_invalid_1YaO_","form-checkbox":"TheNavbar_form-checkbox_2wkrH",label:"TheNavbar_label_LQIH7",checkbox:"TheNavbar_checkbox_3a4Bl",card:"TheNavbar_card_14WSR",marked:"TheNavbar_marked_3q97Q",center:"TheNavbar_center_2YJ1P","text-white":"TheNavbar_text-white_3Cgi-","text-danger":"TheNavbar_text-danger_2sEkt","text-center":"TheNavbar_text-center_3uVEC","fade-enter-active":"TheNavbar_fade-enter-active_2pj7P","fade-leave-active":"TheNavbar_fade-leave-active_1oCC5","fade-enter-from":"TheNavbar_fade-enter-from_3NU5X","fade-leave-to":"TheNavbar_fade-leave-to_3KaIV","alert-enter-active":"TheNavbar_alert-enter-active_2XYVI","alert-leave-active":"TheNavbar_alert-leave-active_1wxKK","alert-enter-from":"TheNavbar_alert-enter-from_26ZyA","alert-leave-to":"TheNavbar_alert-leave-to_21U_U",container:"TheNavbar_container_2mZaZ","with-nav":"TheNavbar_with-nav_1Luny",navbar:"TheNavbar_navbar_XmCkl",item:"TheNavbar_item_2sH4Q",active:"TheNavbar_active_27pbB"}},"56d7":function(e,t,a){"use strict";a.r(t);var n=a("7a23");function r(e,t,a,r,o,c){return r.layout?(Object(n["A"])(),Object(n["f"])(Object(n["H"])(r.layout+"Layout"),{key:0})):Object(n["g"])("",!0)}var o=a("6605");const c={class:"container with-nav"};function s(e,t,a,r,o,s){const l=Object(n["G"])("TheNavbar"),u=Object(n["G"])("VAlert"),i=Object(n["G"])("router-view");return Object(n["A"])(),Object(n["h"])(n["a"],null,[Object(n["l"])(l),Object(n["i"])("div",c,[Object(n["l"])(u),Object(n["l"])(i)])],64)}const l=Object(n["i"])("h3",null,"Crm system",-1);function u(e,t,a,r,o,c){const s=Object(n["G"])("router-link");return Object(n["A"])(),Object(n["h"])("nav",{class:Object(n["u"])(e.$style.navbar)},[l,Object(n["i"])("ul",{class:Object(n["u"])(e.$style.item)},[Object(n["i"])("li",null,[Object(n["l"])(s,{to:"/"},{default:Object(n["R"])(()=>[Object(n["k"])("Заявки")]),_:1})]),Object(n["i"])("li",null,[Object(n["l"])(s,{to:"/help"},{default:Object(n["R"])(()=>[Object(n["k"])("Помощь")]),_:1})]),Object(n["i"])("li",null,[Object(n["i"])("a",{href:"#",onClick:t[0]||(t[0]=Object(n["T"])((...e)=>r.logout&&r.logout(...e),["prevent"]))},"Выход")])],2)],2)}a("14d9");var i=a("5502"),b={name:"TheNavbar",setup(){const e=Object(o["d"])(),t=Object(i["b"])();return{logout:()=>{t.commit("auth/logout"),e.push("/auth")}}}},d=a("2123"),m=a("6b0d"),j=a.n(m);const O={};O["$style"]=d["default"];const p=j()(b,[["render",u],["__cssModules",O]]);var v=p;const f={key:0,class:"alert-title"};function h(e,t,a,r,o,c){return Object(n["A"])(),Object(n["f"])(n["c"],{name:"alert"},{default:Object(n["R"])(()=>[r.message?(Object(n["A"])(),Object(n["h"])("div",{key:0,class:Object(n["u"])(["alert",r.message.type])},[r.title?(Object(n["A"])(),Object(n["h"])("h3",f,Object(n["J"])(r.title),1)):Object(n["g"])("",!0),Object(n["i"])("p",null,Object(n["J"])(r.message.value),1),Object(n["i"])("span",{class:"alert-close",onClick:t[0]||(t[0]=(...e)=>r.close&&r.close(...e))},"×")],2)):Object(n["g"])("",!0)]),_:1})}var _={name:"VAlert",setup(){const e=Object(i["b"])(),t={primary:"Успешно",warning:"Внимание",danger:"Ошибка"},a=Object(n["d"])(()=>e.getters.getMessage),r=Object(n["d"])(()=>a.value?t[a.value.type]:"");return{title:r,message:a,close:()=>e.commit("clearMessage")}}};a("869e");const g=j()(_,[["render",h]]);var y=g,k={name:"MainLayout",components:{TheNavbar:v,VAlert:y}};const q=j()(k,[["render",s]]);var T=q;const w={class:"container"};function M(e,t,a,r,o,c){const s=Object(n["G"])("VAlert"),l=Object(n["G"])("router-view");return Object(n["A"])(),Object(n["h"])("div",w,[Object(n["l"])(s),Object(n["l"])(l)])}var V={name:"AuthLayout",components:{VAlert:y}};const R=j()(V,[["render",M]]);var A=R,x={components:{MainLayout:T,AuthLayout:A},setup(){const e=Object(o["c"])();return{layout:Object(n["d"])(()=>e.meta.layout)}}};const N=j()(x,[["render",r]]);var S=N,E=a("9483");Object(E["a"])("/crm-system/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});a("d9e2");var B=a("bc3a"),C=a("e16f");const L="jwt-token";var G={namespaced:!0,state(){return{token:localStorage.getItem(L)||null}},mutations:{setToken(e,t){e.token=t,localStorage.setItem(L,t)},logout(e){e.token=null,localStorage.removeItem(L)}},actions:{async login({commit:e,dispatch:t},a){try{const t="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyC_ZGSN9z4hsIqUS0UudQnEpSeTnuSlzqI",{data:n}=await B["a"].post(t,{...a,returnSecureToken:!0});e("setToken",n.idToken),e("clearMessage",null,{root:!0})}catch(c){var n,r,o;throw t("setMessage",{value:Object(C["a"])(null===(n=c.response)||void 0===n||null===(r=n.data)||void 0===r||null===(o=r.error)||void 0===o?void 0:o.message),type:"danger"},{root:!0}),new Error}}},getters:{token(e){return e.token},isAutorize(e,{token:t}){return!!t}}};function U(e,t,a,r,o,c){const s=Object(n["G"])("VLoader"),l=Object(n["G"])("VButton"),u=Object(n["G"])("RequestFilter"),i=Object(n["G"])("RequestTable"),b=Object(n["G"])("RequestForm"),d=Object(n["G"])("VModal"),m=Object(n["G"])("VPage");return r.loading?(Object(n["A"])(),Object(n["f"])(s,{key:0})):(Object(n["A"])(),Object(n["f"])(m,{key:1,title:"Список заявок"},{header:Object(n["R"])(()=>[Object(n["l"])(l,{onClick:t[0]||(t[0]=e=>r.showModal=!0)},{default:Object(n["R"])(()=>[Object(n["k"])(" Создать ")]),_:1})]),default:Object(n["R"])(()=>[Object(n["l"])(u,{modelValue:r.filter,"onUpdate:modelValue":t[1]||(t[1]=e=>r.filter=e)},null,8,["modelValue"]),Object(n["l"])(i,{requests:r.requests},null,8,["requests"]),(Object(n["A"])(),Object(n["f"])(n["b"],{to:"body"},[Object(n["l"])(d,{open:r.showModal,title:"Создать заявку",onClose:t[3]||(t[3]=e=>r.showModal=!1)},{default:Object(n["R"])(()=>[Object(n["l"])(b,{onCreated:t[2]||(t[2]=e=>r.showModal=!1)})]),_:1},8,["open"])]))]),_:1}))}const F={key:0};function P(e,t,a,r,o,c){return Object(n["A"])(),Object(n["f"])(n["c"],{name:"fade",duration:"500",onBeforeEnter:r.lockBody,onAfterLeave:r.unlockBody},{default:Object(n["R"])(()=>[a.open?(Object(n["A"])(),Object(n["h"])("div",F,[Object(n["i"])("div",{class:Object(n["u"])(e.$style.backdrop),onClick:t[0]||(t[0]=t=>e.$emit("close"))},null,2),Object(n["i"])("div",{class:Object(n["u"])(e.$style.modal)},[a.title?(Object(n["A"])(),Object(n["h"])("h3",{key:0,class:Object(n["u"])(e.$style.title)},Object(n["J"])(a.title),3)):Object(n["g"])("",!0),Object(n["F"])(e.$slots,"default")],2)])):Object(n["g"])("",!0)]),_:3},8,["onBeforeEnter","onAfterLeave"])}function $(){document.body.style.paddingRight=window.innerWidth-document.documentElement.clientWidth+"px",document.body.style.height="100%",document.body.style.overflow="hidden",document.body.style.touchAction="none"}function J(){document.body.style.height="",document.body.style.overflow="",document.body.style.touchAction="",document.body.style.paddingRight=""}var I={name:"VModal",props:{open:{type:Boolean,default:!1},title:{type:String,default:""}},emits:["close"],setup(){return{lockBody:$,unlockBody:J}}},D=a("33ea");const H={};H["$style"]=D["default"];const z=j()(I,[["render",P],["__cssModules",H]]);var X=z,Z=a("a033");const K=Object(n["i"])("thead",null,[Object(n["i"])("tr",null,[Object(n["i"])("th",null,"#"),Object(n["i"])("th",null,"ФИО"),Object(n["i"])("th",null,"Телефон"),Object(n["i"])("th",null,"Сумма"),Object(n["i"])("th",null,"Статус"),Object(n["i"])("th",null,"Действие")])],-1);function Q(e,t,a,r,o,c){const s=Object(n["G"])("VStatus"),l=Object(n["G"])("VButton");return 0===a.requests.length?(Object(n["A"])(),Object(n["h"])("h3",{key:0,class:Object(n["u"])([e.$style.empty,"text-center"])}," Заявок пока нет ",2)):(Object(n["A"])(),Object(n["h"])("table",{key:1,class:Object(n["u"])(e.$style.table)},[K,Object(n["i"])("tbody",null,[(Object(n["A"])(!0),Object(n["h"])(n["a"],null,Object(n["E"])(a.requests,(e,t)=>(Object(n["A"])(),Object(n["h"])("tr",{key:e.id},[Object(n["i"])("td",null,Object(n["J"])(t+1),1),Object(n["i"])("td",null,Object(n["J"])(e.fio),1),Object(n["i"])("td",null,Object(n["J"])(e.phone),1),Object(n["i"])("td",null,Object(n["J"])(r.currency(e.summ)),1),Object(n["i"])("td",null,[Object(n["l"])(s,{status:e.status},null,8,["status"])]),Object(n["i"])("td",null,[Object(n["l"])(l,{link:{name:"Request",params:{id:e.id}}},{default:Object(n["R"])(()=>[Object(n["k"])(" Открыть ")]),_:2},1032,["link"])])]))),128))])],2))}var W=a("3f9b"),Y=a("b4be"),ee={name:"RequestTable",components:{VStatus:Y["a"]},props:{requests:{type:Array,default:()=>[]}},setup(){return{currency:W["a"]}}},te=a("a117");const ae={};ae["$style"]=te["default"];const ne=j()(ee,[["render",Q],["__cssModules",ae]]);var re=ne;const oe=Object(n["i"])("label",{for:"fio"},"ФИО",-1),ce={key:0},se=Object(n["i"])("label",{for:"phone"},"Телефон",-1),le={key:0},ue=Object(n["i"])("label",{for:"summ"},"Сумма заявки",-1),ie={key:0},be={class:"form-control"},de=Object(n["i"])("label",{for:"status"},"Статус",-1),me=Object(n["i"])("option",{value:"done"},"Завершен",-1),je=Object(n["i"])("option",{value:"cancelled"},"Отклонен",-1),Oe=Object(n["i"])("option",{value:"active"},"Активен",-1),pe=Object(n["i"])("option",{value:"pending"},"Выполняется",-1),ve=[me,je,Oe,pe];function fe(e,t,a,r,o,c){const s=Object(n["G"])("VButton");return Object(n["A"])(),Object(n["h"])("form",{onSubmit:t[6]||(t[6]=Object(n["T"])((...t)=>e.onSubmit&&e.onSubmit(...t),["prevent"]))},[Object(n["i"])("div",{class:Object(n["u"])(["form-control",{invalid:e.fioError}])},[oe,Object(n["S"])(Object(n["i"])("input",{id:"fio","onUpdate:modelValue":t[0]||(t[0]=t=>e.fio=t),type:"text",onBlur:t[1]||(t[1]=(...t)=>e.fioBlur&&e.fioBlur(...t))},null,544),[[n["N"],e.fio]]),e.fioError?(Object(n["A"])(),Object(n["h"])("small",ce,Object(n["J"])(e.fioError),1)):Object(n["g"])("",!0)],2),Object(n["i"])("div",{class:Object(n["u"])(["form-control",{invalid:e.phoneError}])},[se,Object(n["S"])(Object(n["i"])("input",{id:"phone","onUpdate:modelValue":t[2]||(t[2]=t=>e.phone=t),type:"number",placeholder:"+79999999999"},null,512),[[n["N"],e.phone]]),e.phoneError?(Object(n["A"])(),Object(n["h"])("small",le,Object(n["J"])(e.phoneError),1)):Object(n["g"])("",!0)],2),Object(n["i"])("div",{class:Object(n["u"])(["form-control",{invalid:e.summError}])},[ue,Object(n["S"])(Object(n["i"])("input",{id:"summ","onUpdate:modelValue":t[3]||(t[3]=t=>e.summ=t),type:"number",onBlur:t[4]||(t[4]=(...t)=>e.summBlur&&e.summBlur(...t))},null,544),[[n["N"],e.summ,void 0,{number:!0}]]),e.summError?(Object(n["A"])(),Object(n["h"])("small",ie,Object(n["J"])(e.summError),1)):Object(n["g"])("",!0)],2),Object(n["i"])("div",be,[de,Object(n["S"])(Object(n["i"])("select",{id:"status","onUpdate:modelValue":t[5]||(t[5]=t=>e.status=t)},ve,512),[[n["M"],e.status]])]),Object(n["l"])(s,{disabled:e.isSubmitting,type:"submit"},{default:Object(n["R"])(()=>[Object(n["k"])(" Создать ")]),_:1},8,["disabled"])],32)}var he=a("7bb1"),_e=a("506a");function ge(e){const{handleSubmit:t,isSubmitting:a}=Object(he["b"])({initialValues:{status:"active"}}),{value:n,errorMessage:r,handleBlur:o}=Object(he["a"])("fio",_e["b"]().trim().required("Имя не может быть пустым")),{value:c,errorMessage:s,handleBlur:l}=Object(he["a"])("phone",_e["b"]().trim().required("Телефон не может быть пустым").matches(/^((\+7|7|8)+([0-9]){10})$/,"Телефон введен неверно").max(11,"Телефон введен неверно max")),{value:u,errorMessage:i,handleBlur:b}=Object(he["a"])("summ",_e["a"]().required("Сумма не может быть пустой").min(0,"Сумма не может быть меньше 0")),{value:d}=Object(he["a"])("status"),m=t(e);return{fio:n,fioError:r,fioBlur:o,phone:c,phoneError:s,phoneBlur:l,summ:u,summError:i,summBlur:b,status:d,onSubmit:m,isSubmitting:a}}var ye={name:"RequestForm",emits:["created"],setup(e,{emit:t}){const a=Object(i["b"])(),n=async e=>{await a.dispatch("request/create",e),t("created")};return{...ge(n)}}};const ke=j()(ye,[["render",fe]]);var qe=ke,Te=a("b38e");const we={class:"filter"},Me={class:"form-control"},Ve={class:"form-control"},Re=Object(n["j"])('<option disabled selected>Выберите статус</option><option value="done">Завершен</option><option value="cancelled">Отклонен</option><option value="active">Активен</option><option value="pending">Выполняется</option>',5),Ae=[Re];function xe(e,t,a,r,o,c){const s=Object(n["G"])("VButton");return Object(n["A"])(),Object(n["h"])("div",we,[Object(n["i"])("div",Me,[Object(n["S"])(Object(n["i"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.name=e),type:"text",placeholder:"Начните вводить имя"},null,512),[[n["N"],r.name]])]),Object(n["i"])("div",Ve,[Object(n["S"])(Object(n["i"])("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.status=e)},Ae,512),[[n["M"],r.status]])]),r.isActive?(Object(n["A"])(),Object(n["f"])(s,{key:0,color:"warning",onClick:r.reset},{default:Object(n["R"])(()=>[Object(n["k"])(" Сбросить ")]),_:1},8,["onClick"])):Object(n["g"])("",!0)])}var Ne={name:"RequestFilter",props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const a=Object(n["D"])(),r=Object(n["D"])();Object(n["P"])([a,r],e=>{t("update:modelValue",{name:e[0],status:e[1]})});const o=Object(n["d"])(()=>a.value||r.value);return{name:a,status:r,isActive:o,reset:()=>{a.value="",r.value=""}}}};a("579b");const Se=j()(Ne,[["render",xe]]);var Ee=Se,Be={name:"Home",components:{VPage:Z["a"],RequestTable:re,VModal:X,RequestForm:qe,VLoader:Te["a"],RequestFilter:Ee},setup(){const e=Object(n["D"])(!1),t=Object(i["b"])(),a=Object(n["D"])(!1),r=Object(n["D"])({}),o=Object(n["d"])(()=>t.getters["request/getRequests"].filter(e=>r.value.name?e.fio.toLowerCase().includes(r.value.name.toLowerCase()):e).filter(e=>r.value.status?e.status===r.value.status:e));return Object(n["y"])(async()=>{a.value=!0,await t.dispatch("request/loadRequests"),a.value=!1}),{showModal:e,close:()=>e.value=!1,requests:o,loading:a,filter:r}}};const Ce=j()(Be,[["render",U]]);var Le=Ce;const Ge=[{path:"/",name:"Home",component:Le,meta:{layout:"Main",auth:!0}},{path:"/help",name:"Help",component:()=>a.e("chunk-4004e5c6").then(a.bind(null,"c3ef")),meta:{layout:"Main",auth:!0}},{path:"/request/:id",name:"Request",component:()=>a.e("chunk-2d0a4783").then(a.bind(null,"0728")),meta:{layout:"Main",auth:!0}},{path:"/auth",name:"Auth",component:()=>a.e("chunk-2d0be70b").then(a.bind(null,"2fef")),meta:{layout:"Auth",auth:!1}}],Ue=Object(o["a"])({history:Object(o["b"])("/crm-system/"),routes:Ge,linkActiveClass:"active",linkExactActiveClass:"active"});Ue.beforeEach((e,t,a)=>{const n=e.meta.auth;n&&De.getters["auth/isAutorize"]?a():n&&!De.getters["auth/isAutorize"]?a("/auth?message=auth"):a()});var Fe=Ue;const Pe=B["a"].create({baseURL:"https://vue-crm-899cc-default-rtdb.firebaseio.com"});Pe.interceptors.response.use(null,e=>(401===e.response.status&&Fe.push("/auth?message=auth"),Promise.reject(e)));var $e=Pe,Je={namespaced:!0,state(){return{requests:[]}},getters:{getRequests(e){return e.requests}},mutations:{setRequests(e,t){e.requests=t},addRequest(e,t){e.requests.push(t)}},actions:{async create({commit:e,dispatch:t},a){try{const n=De.getters["auth/token"],{data:r}=await $e.post("/requests.json?auth="+n,a);e("addRequest",{...a,id:r.name}),t("setMessage",{value:"Заявка успешно создана",type:"primary"},{root:!0})}catch(n){t("setMessage",{value:n.message,type:"danger"},{root:!0})}},async loadRequests({commit:e,dispatch:t}){try{const t=De.getters["auth/token"],{data:a}=await $e.get("/requests.json?auth="+t),n=Object.keys(a).map(e=>({...a[e],id:e}));e("setRequests",n)}catch(a){t("setMessage",{value:a.message,type:"danger"},{root:!0})}},async loadById({commit:e,dispatch:t},a){try{const e=De.getters["auth/token"],{data:t}=await $e.get(`/requests/${a}.json?auth=${e}`);return t}catch(n){t("setMessage",{value:n.message,type:"danger"},{root:!0})}},async removeRequest({dispatch:e},t){try{const a=De.getters["auth/token"];await $e.delete(`/requests/${t}.json?auth=${a}`),e("setMessage",{value:"Заявка была удалена",type:"primary"},{root:!0})}catch(a){e("setMessage",{value:a.message,type:"danger"},{root:!0})}},async updateRequest({commit:e,dispatch:t},a){try{const e=De.getters["auth/token"];await $e.put(`/requests/${a.id}.json?auth=${e}`,a),t("setMessage",{value:"Заявка успешно обновлена",type:"primary"},{root:!0})}catch(n){t("setMessage",{value:n.message,type:"danger"},{root:!0})}}}};const Ie=[];var De=Object(i["a"])({plugins:Ie,state(){return{message:null}},getters:{getMessage(e){return e.message}},mutations:{setMessage(e,t){e.message=t},clearMessage(e){e.message=null}},actions:{setMessage({commit:e},t){e("setMessage",t),setTimeout(()=>{e("clearMessage")},5e3)}},modules:{auth:G,request:Je}});function He(e,t,a,r,o,c){return Object(n["A"])(),Object(n["f"])(Object(n["H"])(r.component),{class:Object(n["u"])([r.classes,"btn"]),to:a.link||null,type:a.link?null:a.type,disabled:a.disabled},{default:Object(n["R"])(()=>[Object(n["F"])(e.$slots,"default")]),_:3},8,["class","to","type","disabled"])}var ze={name:"VButton",props:{link:{type:[String,Object],default:""},type:{type:String,default:"button"},color:{type:String,default:"primary",validator(e){return["primary","danger","warning"].includes(e)}},disabled:{type:Boolean,default:!1}},setup(e){const t=Object(n["d"])(()=>e.link?"router-link":"button"),a=Object(n["d"])(()=>["btn--"+e.color,{"is-disabled":e.disabled}]);return{component:t,classes:a}}};a("af56");const Xe=j()(ze,[["render",He]]);var Ze=Xe;Object(n["e"])(S).component("VButton",Ze).use(De).use(Fe).mount("#app")},"579b":function(e,t,a){"use strict";a("8706")},7679:function(e,t,a){e.exports={bold:"RequestTable_bold_1AnGL","pt-2":"RequestTable_pt-2_1eXFn","pt-1":"RequestTable_pt-1_25S32","pt-5":"RequestTable_pt-5_3ettN","form-control":"RequestTable_form-control_389ZJ",_w40:"RequestTable__w40_2uvsH",invalid:"RequestTable_invalid_2Q38R","form-checkbox":"RequestTable_form-checkbox__NnS9",label:"RequestTable_label_1OIK1",checkbox:"RequestTable_checkbox_3EEsT",card:"RequestTable_card_26pqn",marked:"RequestTable_marked_1FOAE",center:"RequestTable_center_Ce_H3","text-white":"RequestTable_text-white_16kDD","text-danger":"RequestTable_text-danger_3EFjV","text-center":"RequestTable_text-center_3Fu7F","fade-enter-active":"RequestTable_fade-enter-active_1y_UN","fade-leave-active":"RequestTable_fade-leave-active_1s0ke","fade-enter-from":"RequestTable_fade-enter-from_3eULJ","fade-leave-to":"RequestTable_fade-leave-to_34GOq","alert-enter-active":"RequestTable_alert-enter-active_3SD38","alert-leave-active":"RequestTable_alert-leave-active_1cEGy","alert-enter-from":"RequestTable_alert-enter-from_ynJpL","alert-leave-to":"RequestTable_alert-leave-to_331ZV",container:"RequestTable_container_2hx4X","with-nav":"RequestTable_with-nav_2pXVr",empty:"RequestTable_empty_3Y4uX",table:"RequestTable_table_Yzy7L"}},"869e":function(e,t,a){"use strict";a("a541")},8706:function(e,t,a){},"9e8a":function(e,t,a){"use strict";a("26ef")},a033:function(e,t,a){"use strict";var n=a("7a23");const r={class:"card"},o={key:0,class:"breadcrumbs"},c={class:"card-title"};function s(e,t,a,s,l,u){const i=Object(n["G"])("router-link");return Object(n["A"])(),Object(n["h"])("div",r,[a.back?(Object(n["A"])(),Object(n["h"])("div",o,[Object(n["l"])(i,{to:"/"},{default:Object(n["R"])(()=>[Object(n["k"])("Вернуться к списку заявок")]),_:1})])):Object(n["g"])("",!0),Object(n["i"])("h1",c,[Object(n["k"])(Object(n["J"])(a.title)+" ",1),Object(n["F"])(e.$slots,"header")]),Object(n["F"])(e.$slots,"default")])}var l={name:"VPage",props:{title:{type:String,required:!0},back:{type:Boolean,default:!1}},setup(e){document.title=e.title+" | Crm system"}},u=(a("bd0b"),a("6b0d")),i=a.n(u);const b=i()(l,[["render",s]]);t["a"]=b},a117:function(e,t,a){"use strict";var n=a("7679"),r=a.n(n);a.d(t,"default",(function(){return r.a}))},a144:function(e,t,a){"use strict";a("a4dc")},a4dc:function(e,t,a){},a541:function(e,t,a){},af56:function(e,t,a){"use strict";a("fd2a")},b38e:function(e,t,a){"use strict";var n=a("7a23");const r={class:"loader"};function o(e,t,a,o,c,s){return Object(n["A"])(),Object(n["h"])("div",r)}var c={name:"Loader"},s=(a("a144"),a("6b0d")),l=a.n(s);const u=l()(c,[["render",o]]);t["a"]=u},b4be:function(e,t,a){"use strict";var n=a("7a23");function r(e,t,a,r,o,c){return Object(n["A"])(),Object(n["h"])("span",{class:Object(n["u"])(["badge",r.className])},Object(n["J"])(r.statusText),3)}var o={name:"VStatus",props:{status:{type:String,required:!0,validator(e){return["active","cancelled","done","pending"].includes(e)}}},setup(e){const t={active:"primary",cancelled:"danger",done:"primary",pending:"warning"},a={active:"Активен",cancelled:"Отменен",done:"Завершен",pending:"Выполняется"},r=Object(n["D"])(t[e.status]),o=Object(n["D"])(a[e.status]);return Object(n["P"])(e,e=>{r.value=t[e.status],o.value=a[e.status]}),{className:r,statusText:o}}},c=(a("9e8a"),a("6b0d")),s=a.n(c);const l=s()(o,[["render",r]]);t["a"]=l},bd0b:function(e,t,a){"use strict";a("d251")},d251:function(e,t,a){},e16f:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const n={EMAIL_NOT_FOUND:"Пользователь с таким email не был найден",INVALID_PASSWORD:"Пароль введен неверно",auth:"Войдите в систему"};function r(e){return n[e]||" Неизвестная ошибка"}},f4dc:function(e,t,a){e.exports={bold:"VModal_bold_341VL","pt-2":"VModal_pt-2_2t1yK","pt-1":"VModal_pt-1_3tRaG","pt-5":"VModal_pt-5_147Cj","form-control":"VModal_form-control_2h13p",_w40:"VModal__w40_Nqxs_",invalid:"VModal_invalid_1juaT","form-checkbox":"VModal_form-checkbox_2nEFX",label:"VModal_label_fOdYd",checkbox:"VModal_checkbox_H96Zo",card:"VModal_card_1l0kx",marked:"VModal_marked_1supa",center:"VModal_center_Bh2hh","text-white":"VModal_text-white_cDMwU","text-danger":"VModal_text-danger_36U60","text-center":"VModal_text-center_3_AgZ","fade-enter-active":"VModal_fade-enter-active_1z3_R","fade-leave-active":"VModal_fade-leave-active_1IUjV","fade-enter-from":"VModal_fade-enter-from_10BnC","fade-leave-to":"VModal_fade-leave-to_Fxplq","alert-enter-active":"VModal_alert-enter-active_3KxOP","alert-leave-active":"VModal_alert-leave-active_3GUxJ","alert-enter-from":"VModal_alert-enter-from_OGJ2b","alert-leave-to":"VModal_alert-leave-to_2IOX1",container:"VModal_container_2Uvrz","with-nav":"VModal_with-nav_2vxV3",modal:"VModal_modal_WrIw0",backdrop:"VModal_backdrop_11QcO",title:"VModal_title_mkU_W"}},fd2a:function(e,t,a){}});
//# sourceMappingURL=app.2ddfb14c.js.map