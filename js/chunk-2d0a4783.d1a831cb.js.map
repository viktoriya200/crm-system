{"version":3,"sources":["webpack:///./src/views/Request.vue","webpack:///./src/views/Request.vue?0090"],"names":["_createElementVNode","class","for","value","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","$setup","_createBlock","_component_VLoader","key","_component_VPage","title","back","_hoisted_1","fio","_hoisted_2","phone","_hoisted_3","summ","_hoisted_4","_component_VStatus","status","_hoisted_5","_hoisted_6","id","_createVNode","_component_VButton","color","onClick","_createElementBlock","_hoisted_12","_ctx","params","name","components","VPage","VLoader","VStatus","setup","router","useRouter","route","useRoute","store","useStore","loading","ref","request","onMounted","async","dispatch","isStatusChanged","computed","remove","push","update","data","currency","__exports__","render"],"mappings":"iJAQOA,eAA4B,cAApB,eAAW,G,EACnBA,eAAwB,cAAhB,WAAO,G,EACfA,eAAsB,cAAd,SAAK,G,EACbA,eAAuB,cAAf,UAAM,G,GAEZC,MAAM,gB,EACTD,eAAkC,SAA3BE,IAAI,UAAS,UAAM,G,EAMxBF,eAAsC,UAA9BG,MAAM,QAAO,YAAQ,G,EAC7BH,eAA2C,UAAnCG,MAAM,aAAY,YAAQ,G,EAClCH,eAAuC,UAA/BG,MAAM,UAAS,WAAO,G,EAC9BH,eAA4C,UAApCG,MAAM,WAAU,eAAW,G,GAHnCC,EACAC,EACAC,EACAC,G,SAmBKN,MAAM,0B,mJAzCFO,WAAO,iBAAtBC,eAA0BC,GAAAC,SAGXH,WAAO,iBADtBC,eAqCQG,G,MAnCJC,MAAM,SACNC,KAAA,I,wBAEF,IAAsD,CAAtDd,eAAsD,UAAnDe,EAA4B,oBAAE,eAAGP,UAAQQ,KAAG,KAC/ChB,eAAoD,UAAjDiB,EAAwB,oBAAE,eAAGT,UAAQU,OAAK,KAC7ClB,eAA2D,UAAxDmB,EAAsB,oBAAE,eAAGX,WAASA,UAAQY,OAAI,KACnDpB,eAAoE,UAAjEqB,EAAuB,qBAAE,eAAoCC,GAA1BC,OAAQf,UAAQe,Q,qBAEtDvB,eAYM,MAZNwB,EAYM,CAXJC,EAAkC,eAClCzB,eASS,UARL0B,GAAG,S,qCACMlB,SAAM,GACfP,MAAM,Q,gBADGO,cAUfmB,eAKUC,GAJNC,MAAM,SACLC,QAAOtB,U,wBACX,IAED,gBAFC,e,oBAKSA,mBAAe,iBADzBC,eAKUmB,G,MAHLE,QAAOtB,U,wBACX,IAED,gBAFC,gB,sEAKHuB,eAEK,KAFLC,EAA0C,kBAC1B,eAAGC,SAAOC,OAAOR,IAAK,eACtC,I,sFAca,GACbS,KAAM,UAENC,WAAY,CACVC,aACAC,eACAC,gBAGFC,QACE,MAAMC,EAASC,iBACTC,EAAQC,iBACRC,EAAQC,iBACRC,EAAUC,gBAAI,GACdC,EAAUD,eAAI,IACdzB,EAASyB,iBAEfE,eAAUC,UAAY,MACpBF,EAAQ9C,YAAc0C,EAAMO,SAAS,mBAAoBT,EAAMT,OAAOR,IACtEH,EAAOpB,MAAqB,QAAjB,EAAI8C,EAAQ9C,aAAK,aAAb,EAAeoB,OAC9BwB,EAAQ5C,OAAQ,IAGlB,MAAMkD,EAAkBC,eAAS,kBAAM/B,EAAOpB,SAAuB,QAAnB,EAAM8C,EAAQ9C,aAAK,aAAb,EAAeoB,UAEjEgC,EAASJ,gBACPN,EAAMO,SAAS,wBAAyBT,EAAMT,OAAOR,IAC3De,EAAOe,KAAK,MAGRC,EAASN,UACb,MAAMO,EAAO,IACRT,EAAQ9C,MACXuB,GAAIiB,EAAMT,OAAOR,GACjBH,OAAQA,EAAOpB,aAGX0C,EAAMO,SAAS,wBAAyBM,GAE9CT,EAAQ9C,MAAMoB,OAASA,EAAOpB,OAGhC,MAAO,CACL4C,UACAE,UACA1B,SACA8B,kBACAM,gBACAJ,SACAE,Y,qBCtGN,MAAMG,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d0a4783.d1a831cb.js","sourcesContent":["<template>\n  <VLoader v-if=\"loading\" />\n\n  <VPage\n      v-else-if=\"request\"\n      title=\"Заявка\"\n      back\n  >\n    <p><strong>Имя клиента</strong>: {{ request.fio }}</p>\n    <p><strong>Телефон</strong>: {{ request.phone }}</p>\n    <p><strong>Сумма</strong>: {{ currency(request.summ) }}</p>\n    <p><strong>Статус</strong>: <VStatus :status=\"request.status\" /></p>\n\n    <div class=\"form-control\">\n      <label for=\"status\">Статус</label>\n      <select\n          id=\"status\"\n          v-model=\"status\"\n          class=\"_w40\"\n      >\n        <option value=\"done\">Завершен</option>\n        <option value=\"cancelled\">Отклонен</option>\n        <option value=\"active\">Активен</option>\n        <option value=\"pending\">Выполняется</option>\n      </select>\n    </div>\n\n    <VButton\n        color=\"danger\"\n        @click=\"remove\"\n    >\n      Удалить\n    </VButton>\n\n    <VButton\n        v-if=\"isStatusChanged\"\n        @click=\"update\"\n    >\n      Обновить\n    </VButton>\n  </VPage>\n\n  <h3 v-else class=\"text-center text-white\">\n    Заявка с ID = {{ $route.params.id }} не найдена\n  </h3>\n</template>\n\n<script>\nimport {useRoute, useRouter} from \"vue-router\";\nimport {ref, onMounted, computed} from \"vue\";\nimport {useStore} from \"vuex\";\n\nimport {currency} from \"../utils/currency\";\n\nimport VPage from \"../components/ui/VPage\";\nimport VLoader from \"../components/ui/VLoader\";\nimport VStatus from \"../components/ui/VStatus\";\n\nexport default {\n  name: 'Request',\n\n  components: {\n    VPage,\n    VLoader,\n    VStatus,\n  },\n\n  setup() {\n    const router = useRouter();\n    const route = useRoute();\n    const store = useStore();\n    const loading = ref(true);\n    const request = ref({});\n    const status = ref()\n\n    onMounted(async () => {\n      request.value = await store.dispatch('request/loadById', route.params.id);\n      status.value = request.value?.status;\n      loading.value = false;\n    })\n\n    const isStatusChanged = computed(() => status.value !== request.value?.status)\n\n    const remove = async () => {\n      await store.dispatch('request/removeRequest', route.params.id);\n      router.push('/');\n    }\n\n    const update = async () => {\n      const data = {\n        ...request.value,\n        id: route.params.id,\n        status: status.value,\n      }\n\n      await store.dispatch('request/updateRequest', data);\n\n      request.value.status = status.value;\n    }\n\n    return {\n      loading,\n      request,\n      status,\n      isStatusChanged,\n      currency,\n      remove,\n      update,\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import { render } from \"./Request.vue?vue&type=template&id=7a49ad92\"\nimport script from \"./Request.vue?vue&type=script&lang=js\"\nexport * from \"./Request.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/user/WebstormProjects/vue-srm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}